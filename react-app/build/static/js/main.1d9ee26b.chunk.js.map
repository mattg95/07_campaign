{"version":3,"sources":["TypeForm.jsx","TextBox.jsx","MpForm.jsx","DisplayMp.jsx","SendEmail.jsx","IntroContent.jsx","Footer.jsx","thankyouScreen.jsx","App.jsx","PrivacyPolicy.jsx","reportWebVitals.js","index.js"],"names":["TypeForm","passDataUpstream","isMobile","typeformComponent","useRef","buttonRef","useState","typeformWidgetOpen","setTypeformWidgetOpen","mobileTypeform","typeformEmbed","mode","autoClose","onSubmit","response_id","responseId","onClose","useEffect","current","hideScrollbars","opacity","setTimeout","className","ref","onClick","e","preventDefault","open","scrollIntoView","behavior","block","id","TextBox","emailBody","viewContainerClassName","type","inputProps","placeholder","rows","saveButtonContent","cancelButtonContent","editButtonContent","value","onSave","val","emailWithGreeting","trigger","closeOnDocumentClick","onOpen","el","document","createElement","body","appendChild","select","setSelectionRange","execCommand","removeChild","copied","MpForm","dropDownOpen","postcodeError","state","setState","dropdownRef","window","scrollBy","postToApi","postcode","a","fetch","method","headers","then","response","json","data","error","mpData","handleValidation","target","length","test","toUpperCase","emailVisible","onChange","htmlFor","name","DisplayMp","constituency","full_name","party","mpEmailAddress","sendEmail","subject","href","encodeURIComponent","rel","emailSent","IntroContent","Footer","Row","Col","xs","to","ThankyouScreen","data-a2a-url","data-a2a-title","require","config","path","socket","socketIOClient","App","width","innerWidth","generatedEmailBody","emailSubject","positiveTypeFormResponseReturned","greeting","displayMpRef","emailBoxRef","on","formToken","generatedEmail","supportsAid","script","async","src","Object","keys","forEach","key","Container","SendEmail","PrivacyPolicy","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","TagManager","initialize","gtmId","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1d9ee26b.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport * as typeformEmbed from \"@typeform/embed\";\n\nconst TypeForm = ({ passDataUpstream, isMobile }) => {\n  const typeformComponent = useRef(null);\n  const buttonRef = useRef(null);\n  const [typeformWidgetOpen, setTypeformWidgetOpen] = useState(true);\n\n  const mobileTypeform = typeformEmbed.makePopup(\n    `https://z8ivgb8lhnl.typeform.com/to/YbkRDwtc`,\n    {\n      mode: \"popup\",\n      autoClose: 3,\n      onSubmit: ({ response_id }) => {\n        passDataUpstream({ responseId: response_id });\n      },\n      onClose: ({ response_id }) => {\n        passDataUpstream({ responseId: response_id });\n      },\n    }\n  );\n\n  useEffect(() => {\n    !isMobile &&\n      typeformEmbed.makeWidget(\n        typeformComponent.current,\n        `https://z8ivgb8lhnl.typeform.com/to/YbkRDwtc`,\n        {\n          hideScrollbars: true,\n          opacity: 0,\n          onSubmit: ({ response_id }) => {\n            passDataUpstream({ responseId: response_id });\n            setTimeout(() => {\n              setTypeformWidgetOpen(false);\n            }, 3000);\n          },\n        }\n      );\n  }, [typeformComponent, passDataUpstream, isMobile]);\n\n  return (\n    <div>\n      <div className=\"call-to-action text-center\">\n        <button\n          ref={buttonRef}\n          onClick={(e) => {\n            e.preventDefault();\n            isMobile\n              ? mobileTypeform.open()\n              : typeformComponent.current.scrollIntoView({\n                  behavior: \"smooth\",\n                  block: \"end\",\n                });\n          }}\n          className=\"btn btn-primary btn-lg main-cta\"\n        >\n          Fill out the survey to email your MP{\" \"}\n        </button>\n        <p className=\"explanation\">\n          <strong>We will draft an email</strong> based on your survey\n          responses,{\" \"}\n          <strong>written to have the maximum impact on your MP.</strong> With\n          your help we can safeguard the support so many need.\n        </p>\n      </div>\n      <div\n        ref={typeformComponent}\n        className={`typeform-widget ${typeformWidgetOpen ? \"\" : \"closed\"}`}\n        id=\"typeform\"\n      />\n    </div>\n  );\n};\n\nexport default TypeForm;\n","/* eslint react-hooks/exhaustive-deps: 0 */ // --> turns eslint warning message off\n\nimport React from \"react\";\nimport EdiText from \"react-editext\";\n\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\n\nconst TextBox = ({ emailBody, passDataUpstream }) => {\n  const copyToClipboard = () => {\n    const el = document.createElement(\"textarea\"); //creating a text area to be removed later (bit hacky)\n    el.value = emailBody;\n    document.body.appendChild(el);\n    el.select();\n    el.setSelectionRange(0, 99999); /* For mobile devices */\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n    passDataUpstream({ copied: true });\n  };\n\n  return (\n    <div>\n      <div>\n        <h2 className=\"secondary-header\">Edit your email</h2>\n        <EdiText\n          viewContainerClassName=\"emailBox\"\n          type=\"textarea\"\n          inputProps={{\n            placeholder: \"your email will appear here\",\n            rows: 10,\n          }}\n          saveButtonContent=\"Apply\"\n          cancelButtonContent={<strong>Cancel</strong>}\n          editButtonContent=\"Edit Your Email\"\n          value={emailBody} // validates the webhook response token against the response id from the embedded tyeform widget\n          onSave={(val) => {\n            passDataUpstream({ emailWithGreeting: val }); //if the user edits the text box, a new property called editedResponse is set in state\n          }}\n        />\n\n        <Popup\n          trigger={(open) => (\n            <button className=\"btn btn-outline-primary copy-button\">\n              Copy\n            </button>\n          )}\n          closeOnDocumentClick\n          onOpen={copyToClipboard}\n          className=\"copy-popup\"\n        >\n          <span> Copied to clipboard </span>\n        </Popup>\n      </div>\n    </div>\n  );\n};\n\nexport default TextBox;\n","import React, { useState, useEffect, useRef } from \"react\";\n\nconst MpForm = ({ passDataUpstream }) => {\n  const [state, setState] = useState({\n    dropDownOpen: false,\n    postcodeError: \"\",\n  });\n\n  const { dropDownOpen, postcodeError } = state;\n\n  const dropdownRef = useRef();\n\n  //if the dropdown postcode is opened, on 'don't see your MP' this scrolls the page down to it\n  useEffect(() => {\n    const { current } = dropdownRef;\n    current &&\n      current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"end\",\n      });\n    window.scrollBy(0, 100);\n  }, [dropDownOpen]);\n\n  const postToApi = async (postcode) => {\n    const response = await fetch(`/api/postcode/${postcode}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.error) {\n          setState({ ...state, postcodeError: data.error });\n        } else {\n          passDataUpstream({ mpData: data });\n          setState({ ...state, postcodeError: \"\" });\n        }\n      });\n    return response;\n  };\n\n  const handleValidation = (e) => {\n    e.preventDefault();\n    const { value } = e.target;\n    const postCodeRegex = /([A-Z][A-HJ-Y]?[0-9][A-Z0-9]? ?[0-9][A-Z]{2}|GIR ?0A{2})$/;\n    if (value) {\n      if (value.length > 5) {\n        if (postCodeRegex.test(value.toUpperCase())) {\n          postToApi(value);\n        } else {\n          setState({ ...state, postcodeError: \"Invalid postcode\" });\n        }\n      }\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"button-container\" id=\"postcodeDropdown\">\n        <button\n          className=\"btn btn-lg cta btn-outline-primary left-button\"\n          type=\"submit\"\n          onClick={(e) => {\n            e.preventDefault();\n            setState({ ...state, dropDownOpen: true });\n          }}\n        >\n          Don't see your MP?\n        </button>\n        <button\n          className=\"btn btn-lg cta btn-primary right-button \"\n          type=\"submit\"\n          onClick={(e) => {\n            e.preventDefault();\n            setState({ ...state, dropDownOpen: false });\n            passDataUpstream({ emailVisible: true });\n          }}\n        >\n          Yes, continue with this MP\n        </button>\n      </div>\n      {dropDownOpen && (\n        <form\n          className=\"get-MP-form\"\n          id=\"postcodeDropdown\"\n          ref={dropdownRef}\n          onChange={handleValidation}\n          onSubmit={handleValidation}\n        >\n          <label htmlFor=\"postcode\">Postcode:</label>\n          <input type=\"text\" name=\"postcode\" />\n          <div className=\"error postcode-error\">\n            {postcodeError ? postcodeError : \"\"}\n          </div>\n        </form>\n      )}\n    </div>\n  );\n};\nexport default MpForm;\n","import React from \"react\";\n\nconst DisplayMp = ({\n  mpData: { constituency, full_name, party, name, error, mpEmailAddress },\n}) => {\n  return (\n    <div className=\"displayMP\" id=\"displayMP\">\n      <h2 className=\"secondary-header\">Find Your MP</h2>\n      <div className=\"mpCard text-center\">\n        <div className=\"error\">{error}</div>\n        <div>{constituency}</div>\n        <div>{name}</div>\n        <div>{full_name}</div>\n        <div>{party}</div>\n        <div className=\"mpEmailAddress\">{mpEmailAddress}</div>\n      </div>\n    </div>\n  );\n};\nexport default DisplayMp;\n","import React from \"react\";\n\nconst sendEmail = ({ subject, body, mpEmailAddress, passDataUpstream }) => {\n  return (\n    <div className=\"send-email\">\n      <h2 className=\"secondary-header\">Send your email</h2>\n      <p className=\"explanation\">\n        This will open your email service in a different window\n      </p>\n      <a\n        href={\n          \"mailto:\" +\n          mpEmailAddress +\n          \"?Subject=\" +\n          encodeURIComponent(subject) +\n          \"&Body=\" +\n          encodeURIComponent(body)\n        }\n        className=\"btn btn-primary btn-lg cta send-button\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        onClick={() => {\n          passDataUpstream({ emailSent: true });\n        }}\n      >\n        SEND EMAIL\n      </a>\n    </div>\n  );\n};\nexport default sendEmail;\n","import React from \"react\";\n\n// import ArrowDown from \"./assets/arrow-down.svg\";\n\nconst IntroContent = () => (\n  <div className=\"intro-content\">\n    <h1 className=\"title\">The 0.7% Commitment</h1>\n    <p className=\"intro-para\">\n      The 2019 Conservative Manifesto declared Britain would{\" \"}\n      <strong>\n        \"proudly maintain our commitment to spend 0.7 per cent of GNI on\n        development\"\n      </strong>\n      . But just one year later, the government intends to cut foreign aid.\n      <br></br>\n      <br></br> At a time of unprecedented international crisis, with millions\n      at risk of extreme poverty,{\" \"}\n      <strong>Britain must show leadership - not break its commitments.</strong>\n    </p>\n  </div>\n);\nexport default IntroContent;\n","import { Link } from \"@reach/router\";\nimport React from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\n\nconst Footer = () => (\n  <div id=\"Footer\">\n    <Row>\n      <Col xs={12}>\n        <Link to=\"privacy-policy\">Privacy Policy</Link>\n        © 2021 Red Scarf Services Ltd\n        <br />\n        Company No. 12407870\n        <br />\n        48 Queen Edith's Way, Cambridge, England, CB1 8PW\n        <br />\n        {/* <a href=\"https://concepts.effectivealtruism.org/concepts/aid-effectiveness/\">\n          Further reading on aid\n        </a> */}\n      </Col>\n    </Row>\n  </div>\n);\nexport default Footer;\n","/* eslint-disable jsx-a11y/anchor-has-content */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n\nimport React from \"react\";\n\nconst ThankyouScreen = () => {\n  return (\n    <div>\n      <h2 className=\"secondary-header\">Thankyou!</h2>\n      <p className=\"explanation\">Please share this campaign</p>\n      <div\n        className=\"a2a_kit a2a_kit_size_50 a2a_default_style\"\n        data-a2a-url=\"https://www.point7percent.org/\"\n        data-a2a-title=\"The 0.7% Commitment\"\n      >\n        <a className=\"a2a_dd\" href=\"https://www.addtoany.com/share\"></a>\n        <a className=\"a2a_button_facebook\"></a>\n        <a className=\"a2a_button_twitter\"></a>\n        <a className=\"a2a_button_email\"></a>\n        <a className=\"a2a_button_whatsapp\"></a>\n      </div>\n    </div>\n  );\n};\n\nexport default ThankyouScreen;\n","/* eslint react-hooks/exhaustive-deps: 0 */ // --> turns eslint warning message off\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { Container, Row, Col } from \"react-bootstrap\";\n\nimport TypeForm from \"./TypeForm\";\nimport TextBox from \"./TextBox\";\nimport MpForm from \"./MpForm\";\nimport DisplayMp from \"./DisplayMp\";\nimport SendEmail from \"./SendEmail\";\nimport IntroContent from \"./IntroContent\";\nimport Footer from \"./Footer\";\nimport ThankyouScreen from \"./thankyouScreen\";\n\nimport \"./App.scss\";\n\nrequire(\"dotenv\").config({ path: \"../.env\" });\n\nconst socket = socketIOClient();\n\nconst App = () => {\n  const [state, setState] = useState({\n    width: window.innerWidth,\n    responseId: \"\",\n    mpData: { error: \"Could not find MP\", name: \"\", full_name: \"\" },\n    generatedEmailBody: \"Your email will appear here\",\n    emailSubject: \"\",\n    positiveTypeFormResponseReturned: true,\n    greeting: \"\",\n    emailWithGreeting: \"\",\n    emailVisible: false,\n    emailSent: false,\n  });\n\n  const {\n    responseId,\n    mpData,\n    generatedEmailBody,\n    emailSubject,\n    greeting,\n    emailWithGreeting,\n    positiveTypeFormResponseReturned,\n    width,\n    emailVisible,\n    emailSent,\n  } = state;\n\n  const displayMpRef = useRef(null);\n  const emailBoxRef = useRef(null);\n\n  useEffect(() => {\n    socket.on(\"typeform-incoming\", ({ formToken, generatedEmail }) => {\n      if (formToken === responseId) {\n        setState({\n          ...state,\n          generatedEmailBody: generatedEmail.body,\n          emailSubject: generatedEmail.subject,\n          mpData: generatedEmail.mpData,\n          greeting: generatedEmail.greeting,\n          emailWithGreeting: generatedEmail.greeting + generatedEmail.body,\n          positiveTypeFormResponseReturned: generatedEmail.supportsAid,\n        });\n      }\n    });\n  }, [responseId]);\n\n  useEffect(() => {\n    if (mpData) {\n      const { full_name } = mpData;\n      if (full_name) {\n        setState({\n          ...state,\n          greeting: `Dear ${full_name},\\n`,\n        });\n      }\n    }\n  }, [mpData.name, mpData.full_name]);\n\n  useEffect(() => {\n    setState({\n      ...state,\n      emailWithGreeting: greeting + generatedEmailBody,\n    });\n  }, [generatedEmailBody, greeting]);\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.async = true;\n    script.src = \"https://static.addtoany.com/menu/page.js\";\n    document.body.appendChild(script);\n  }, [emailSent]);\n\n  // const handleWindowSizeChange = () => {\n  //   setState({ ...state, width: window.innerWidth });\n  // };\n\n  // console.log(state);\n\n  // useEffect(() => {\n  //   window.addEventListener(\"resize\", handleWindowSizeChange);\n  //   return () => {\n  //     window.removeEventListener(\"resize\", handleWindowSizeChange);\n  //   };\n  // }, []);\n\n  let isMobile = width && width <= 768;\n\n  useEffect(() => {\n    setTimeout(() => {\n      const { current } = displayMpRef;\n      if (current) {\n        if (isMobile) {\n          if (positiveTypeFormResponseReturned) {\n            current.scrollIntoView({\n              behavior: \"smooth\",\n              block: \"start\",\n            });\n          }\n        }\n      }\n    }, 3000);\n  }, [displayMpRef, positiveTypeFormResponseReturned]);\n\n  //once the emailBox postcode is rendered on click of 'Continue with this MP', this scrolls the page down to it\n  useEffect(() => {\n    const { current } = emailBoxRef;\n    current &&\n      current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"end\",\n      });\n  }, [emailVisible, emailBoxRef]);\n\n  const passDataUpstream = (data) => {\n    Object.keys(data).forEach((key) => {\n      setState({ ...state, [key]: data[key] });\n    });\n  };\n\n  return (\n    <div>\n      <div className=\"main\">\n        <Container>\n          <Row>\n            <Col>\n              <IntroContent />\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <div className=\"typeform\">\n                <TypeForm\n                  passDataUpstream={passDataUpstream}\n                  isMobile={isMobile}\n                />\n              </div>\n            </Col>\n          </Row>\n          {positiveTypeFormResponseReturned && (\n            <>\n              <Row>\n                <Col>\n                  <div ref={displayMpRef}>\n                    <DisplayMp mpData={mpData} />\n                  </div>\n                </Col>\n              </Row>\n              <Row>\n                <Col>\n                  <div id=\"mpForm\" className=\"\">\n                    <MpForm passDataUpstream={passDataUpstream} />\n                  </div>\n                </Col>\n              </Row>\n              {emailVisible && (\n                <div>\n                  <Row>\n                    <Col>\n                      <div ref={emailBoxRef}>\n                        <TextBox\n                          passDataUpstream={passDataUpstream}\n                          emailBody={emailWithGreeting}\n                          subject={emailSubject}\n                        />\n                      </div>\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <div className=\"\">\n                        <SendEmail\n                          mpEmailAddress={mpData.mpEmailAddress}\n                          body={emailWithGreeting}\n                          subject={emailSubject}\n                          passDataUpstream={passDataUpstream}\n                        />\n                      </div>\n                    </Col>\n                  </Row>\n                  {emailSent && (\n                    <Row>\n                      <Col>\n                        <ThankyouScreen />\n                      </Col>\n                    </Row>\n                  )}\n                </div>\n              )}\n            </>\n          )}\n        </Container>\n      </div>\n      <div className=\"footer\">\n        <Container>\n          <Footer />\n        </Container>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\n\nconst PrivacyPolicy = () => (\n  <div className=\"privacy-policy\">\n    <Container>\n      <Row>\n        <Col>\n          <h1>Privacy Policy for The 0.7% Commitment Website</h1>\n          <p>\n            Our Privacy Policy applies only to our online activities and is\n            valid for visitors to our website with regards to the information\n            that they shared and/or collect in https://www.point7percent.org.\n            This policy is not applicable to any information collected offline\n            or via channels other than this website.\n          </p>\n          <h2>General Data Protection Regulation (GDPR)</h2>\n          <p>\n            We are a Data Controller of your information.\n            <br />\n            <br />\n            We collect and process your personal data in order to fulfil various\n            purposes:\n            <ul>\n              <li>\n                Data collected via first and third party tracking scripts and\n                cookies is used to:\n                <ul>\n                  <li>\n                    Improve our website and survey through aggregated data\n                    analysis\n                  </li>\n                  <li>\n                    Understand the usefulness of advertising the survey and\n                    improve advertising targeting.\n                  </li>\n                </ul>\n              </li>\n              <li>\n                Personal details collected during the process of the survey are\n                used to:\n                <ul>\n                  <li>Personalise the results of the survey.</li>\n                  <li>\n                    Contact you to support your engagement with your MP based on\n                    your choices in the survey.\n                  </li>\n                </ul>\n              </li>\n              <li>\n                Process your personal information according to The 0.7%\n                Commitment campaign’s legitimate interests, where we have\n                ensured that your interests and rights have not been infringed.\n              </li>\n              <li>\n                Process or disclose personal information in order to comply with\n                the law.\n              </li>\n            </ul>\n          </p>\n          <p>\n            The 0.7% Commitment will retain your personal information only for\n            as long as isnecessary for the purposes set out in this Privacy\n            Policy. We will retain and use your information to the extent\n            necessary to comply with our legal obligations, resolve disputes,\n            and enforce our policies\n          </p>\n          <p>\n            If you are a resident of the European Economic Area (EEA), you have\n            certain dataprotection rights. If you wish to be informed what\n            Personal Information we hold about you or if you want it to be\n            removed from our systems, please contact us using the email address\n            the0.7percent@gmail.com\n          </p>\n          <h2>Log Files</h2>\n          <p>\n            https://www.point7percent.org follows a standard procedure of using\n            log files. These files log visitors when they visit websites. All\n            hosting companies do this and a part of hosting services' analytics.\n            The information collected by log files include internet protocol\n            (IP) addresses, browser type, Internet Service Provider (ISP), date\n            and time stamp, referring/exit pages, and possibly the number of\n            clicks. These are not linked to any information that is personally\n            identifiable. The purpose of the information is for analysing\n            trends, administering the site, tracking users' movement on the\n            website, and gathering demographic information.\n          </p>\n          <h2>Cookies</h2>\n          <p>\n            CookiesLike any other website, https://www.point7percent.org uses\n            'cookies'. These cookies are used to store information about the\n            pages on the website that the visitor accesses or interacts with,\n            and to control basic functions of the website. You can accept or\n            reject the use of cookies on https://www.point7percent.org through\n            the OneTrust cookie consent window, which can be accessed by\n            selecting the icon in the bottom-right of the screen.\n          </p>\n          <h2>Third Party Cookies</h2>\n          <p>\n            When consent is provided by the user, https://www.point7percent.org\n            uses a Facebook tracking script and cookies to advertise our website\n            and track website usage for the purpose of improving the relevance\n            of our advert targeting. We advise you to consult the Facebook\n            Privacy Policy for more detailed information about how Facebook\n            processes this data.\n          </p>\n          <p>\n            When consent is provided by the user, https://www.point7percent.org\n            uses a Google Analytics tracking script and cookies to track website\n            usage for the purpose of improving the site and survey through\n            aggregated data analysis. This data is siloed and we do not share it\n            with Google.\n          </p>\n          <h2>Children's Information</h2>\n          <p>\n            https://www.point7percent.org does not knowingly collect any\n            Personal Identifiable Information from children under the age of 13.\n            If you think that your child provided this kind of information on\n            our website, we strongly encourage you to contact us immediately\n            using the email address the0.7percent@gmail.com and we will promptly\n            remove any such personal data\n          </p>\n          <h2>Contact Us</h2>\n          For any other questions or comments about this policy please email our\n          Data Protection Officer at the0.7percent@gmail.com. <br />\n          <br />\n          We are regulated by the Information Commissioner’s Office, who you can\n          also contact for advice and support:\n          https://ico.org.uk/make-a-complaint/\n        </Col>\n      </Row>\n    </Container>\n  </div>\n);\nexport default PrivacyPolicy;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport TagManager from \"react-gtm-module\";\nimport { Router } from \"@reach/router\";\nimport HttpsRedirect from \"react-https-redirect\";\n\nimport App from \"./App\";\nimport PrivacyPolicy from \"./PrivacyPolicy\";\n\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst tagManagerArgs = {\n  gtmId: \"GTM-MWBT83W\",\n};\n\nTagManager.initialize(tagManagerArgs);\n\nReactDOM.render(\n  <HttpsRedirect>\n    <Router>\n      <App path=\"/\" />\n      <PrivacyPolicy path=\"/privacy-policy\" />\n    </Router>\n  </HttpsRedirect>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}